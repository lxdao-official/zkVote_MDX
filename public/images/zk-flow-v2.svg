<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="560" viewBox="0 0 1200 560" role="img" aria-label="ZK 投票流程（v2）：本地证明 + 链上验证 + 防重复">
  <rect x="0" y="0" width="1200" height="560" fill="white"/>

  <text x="60" y="88" font-size="34" font-family="-apple-system, BlinkMacSystemFont, Segoe UI, PingFang SC, Microsoft YaHei, sans-serif" fill="#111827" font-weight="700">
    ZK 投票流程（v2）
  </text>
  <text x="60" y="128" font-size="18" font-family="-apple-system, BlinkMacSystemFont, Segoe UI, PingFang SC, Microsoft YaHei, sans-serif" fill="#374151">
    一句话：链上看到的是 proof 和公开输入；身份秘密与选择细节不暴露。
  </text>

  <!-- Columns -->
  <text x="120" y="175" font-size="18" font-family="-apple-system, BlinkMacSystemFont, Segoe UI, PingFang SC, Microsoft YaHei, sans-serif" fill="#111827" font-weight="700">浏览器（本地）</text>
  <text x="860" y="175" font-size="18" font-family="-apple-system, BlinkMacSystemFont, Segoe UI, PingFang SC, Microsoft YaHei, sans-serif" fill="#111827" font-weight="700">链上合约</text>

  <line x1="60" y1="190" x2="1140" y2="190" stroke="#111827" stroke-width="2"/>

  <!-- Left steps -->
  <g font-family="-apple-system, BlinkMacSystemFont, Segoe UI, PingFang SC, Microsoft YaHei, sans-serif">
    <rect x="60" y="220" width="540" height="88" rx="16" fill="#ffffff" stroke="#111827" stroke-width="3"/>
    <text x="90" y="270" font-size="20" fill="#111827" font-weight="700">1) 生成 identitySecret</text>
    <text x="410" y="270" font-size="16" fill="#374151">（仅本地保存）</text>

    <rect x="60" y="324" width="540" height="88" rx="16" fill="#ffffff" stroke="#111827" stroke-width="3"/>
    <text x="90" y="374" font-size="20" fill="#111827" font-weight="700">2) 计算 identityCommitment</text>
    <text x="410" y="374" font-size="16" fill="#374151">加入 Merkle 树</text>

    <rect x="60" y="428" width="540" height="100" rx="16" fill="#ffffff" stroke="#111827" stroke-width="3"/>
    <text x="90" y="474" font-size="20" fill="#111827" font-weight="700">3) 生成 proof + nullifier</text>
    <text x="90" y="504" font-size="16" fill="#374151">公开输入：root / electionId；私有输入：secret / 路径 / vote</text>
  </g>

  <!-- Right steps -->
  <g font-family="-apple-system, BlinkMacSystemFont, Segoe UI, PingFang SC, Microsoft YaHei, sans-serif">
    <rect x="660" y="240" width="480" height="120" rx="16" fill="#ffffff" stroke="#111827" stroke-width="3"/>
    <text x="690" y="286" font-size="20" fill="#111827" font-weight="700">4) verify(proof)</text>
    <text x="690" y="320" font-size="16" fill="#374151">校验 proof 与 publicInputs 是否匹配</text>

    <rect x="660" y="380" width="480" height="120" rx="16" fill="#ffffff" stroke="#111827" stroke-width="3"/>
    <text x="690" y="426" font-size="20" fill="#111827" font-weight="700">5) 检查 nullifier 未使用</text>
    <text x="690" y="460" font-size="16" fill="#374151">通过后计票，并标记 nullifier 已用</text>
  </g>
</svg>
