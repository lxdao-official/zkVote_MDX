<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="560" viewBox="0 0 1200 560" role="img" aria-label="ZK voting flow (v2): local proving, on-chain verification, anti double-vote">
  <rect x="0" y="0" width="1200" height="560" fill="white"/>

  <text x="60" y="88" font-size="34" font-family="-apple-system, BlinkMacSystemFont, Segoe UI, PingFang SC, Microsoft YaHei, sans-serif" fill="#111827" font-weight="700">
    ZK voting flow (v2)
  </text>
  <text x="60" y="128" font-size="18" font-family="-apple-system, BlinkMacSystemFont, Segoe UI, PingFang SC, Microsoft YaHei, sans-serif" fill="#374151">
    One line: the chain sees proof + public inputs; identity secrets and vote details are not revealed.
  </text>

  <text x="120" y="175" font-size="18" font-family="-apple-system, BlinkMacSystemFont, Segoe UI, PingFang SC, Microsoft YaHei, sans-serif" fill="#111827" font-weight="700">Browser (local)</text>
  <text x="860" y="175" font-size="18" font-family="-apple-system, BlinkMacSystemFont, Segoe UI, PingFang SC, Microsoft YaHei, sans-serif" fill="#111827" font-weight="700">On-chain contract</text>

  <line x1="60" y1="190" x2="1140" y2="190" stroke="#111827" stroke-width="2"/>

  <g font-family="-apple-system, BlinkMacSystemFont, Segoe UI, PingFang SC, Microsoft YaHei, sans-serif">
    <rect x="60" y="220" width="540" height="88" rx="16" fill="#ffffff" stroke="#111827" stroke-width="3"/>
    <text x="90" y="270" font-size="20" fill="#111827" font-weight="700">1) Generate identitySecret</text>
    <text x="410" y="270" font-size="16" fill="#374151">(stored locally)</text>

    <rect x="60" y="324" width="540" height="88" rx="16" fill="#ffffff" stroke="#111827" stroke-width="3"/>
    <text x="90" y="374" font-size="20" fill="#111827" font-weight="700">2) Compute identityCommitment</text>
    <text x="410" y="374" font-size="16" fill="#374151">join Merkle tree</text>

    <rect x="60" y="428" width="540" height="100" rx="16" fill="#ffffff" stroke="#111827" stroke-width="3"/>
    <text x="90" y="474" font-size="20" fill="#111827" font-weight="700">3) Generate proof + nullifier</text>
    <text x="90" y="504" font-size="16" fill="#374151">Public: root / electionId; Private: secret / path / vote</text>
  </g>

  <g font-family="-apple-system, BlinkMacSystemFont, Segoe UI, PingFang SC, Microsoft YaHei, sans-serif">
    <rect x="660" y="240" width="480" height="120" rx="16" fill="#ffffff" stroke="#111827" stroke-width="3"/>
    <text x="690" y="286" font-size="20" fill="#111827" font-weight="700">4) verify(proof)</text>
    <text x="690" y="320" font-size="16" fill="#374151">Check proof matches public inputs</text>

    <rect x="660" y="380" width="480" height="120" rx="16" fill="#ffffff" stroke="#111827" stroke-width="3"/>
    <text x="690" y="426" font-size="20" fill="#111827" font-weight="700">5) Check nullifier unused</text>
    <text x="690" y="460" font-size="16" fill="#374151">If valid, tally and mark nullifier used</text>
  </g>
</svg>
